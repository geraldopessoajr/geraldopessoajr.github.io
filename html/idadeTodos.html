<!DOCTYPE html>
<meta charset="utf-8">
<html lang="pt-br">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="../../../../favicon.ico">

    <title>Researchers by Academic Age</title>
    <script src="../js/d3.v3.min.js"></script>
    <script src="../js/d3.tip.v0.6.3.js"></script>
    <!-- Bootstrap core CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    

    <!-- Custom styles for this template -->
    <link href="../css/idade.css" rel="stylesheet">
  </head>
  <body>

    <nav class="navbar navbar-expand-md navbar-dark bg-dark fixed-top">
      <a class="navbar-brand" href="../index.html">Home</a>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarsExampleDefault" aria-controls="navbarsExampleDefault" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse" id="navbarsExampleDefault">
        <ul class="navbar-nav mr-auto">
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="https://example.com" id="dropdown01" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Collaborations per Major Area</a>
            <div class="dropdown-menu" aria-labelledby="dropdown01">
              <a class="dropdown-item" href="./coautoria.html">per Great Area</a>
              <a class="dropdown-item" href="./coautoriaTodos.html">All Great Areas</a>
            </div>
          </li>
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="https://example.com" id="dropdown01" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Collaborations per Geographical Region</a>
            <div class="dropdown-menu" aria-labelledby="dropdown01">
              <a class="dropdown-item" href="./region.html">per Region</a>
              <a class="dropdown-item" href="./regionTodos.html">All Regions</a>
            </div>
          </li>
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="https://example.com" id="dropdown01" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Researchers by Academic Age</a>
            <div class="dropdown-menu" aria-labelledby="dropdown01">
              <a class="dropdown-item" href="./idade.html">per Academic Age</a>
              <a class="dropdown-item" href="./idadeTodos.html">All Academic Ages</a>
              <a class="dropdown-item" href="./idadeArea.html">per Great Area</a>
              <a class="dropdown-item" href="./idadeAreaTodos.html">All Great Areas</a>
            </div>
          </li>
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="https://example.com" id="dropdown01" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Temporal analysis</a>
            <div class="dropdown-menu" aria-labelledby="dropdown01">
              <a class="dropdown-item" href="./distTempo.html">per Great Area</a>
              <a class="dropdown-item" href="./distTempo.html">All Great Areas</a>
            </div>
          </li>
        </ul>
      </div>
    </nav>

    <main role="main" class="container">

      <div class="starter-template">
        <h1>Researchers by Academic Age</h1>
        <!-- <p class="lead">Use this document as a way to quickly start any new project.<br> All you get is this text and a mostly barebones HTML document.</p> -->
      </div>

    </main><!-- /.container -->


  <div id="corpo">
        <div style="display: flex;justify-content: flex-start;">
<!--Select para selecionar qual gráfico-->
          <div>
            <select id="idioma" onchange="atualiza_div(get_idioma());">
              <option value="1">Portuguese</option>
	      <option value="2" selected>English</option>
	    </select>
	  </div>
        </div>
        </br></br>

	  <div id="corpo1" style="display: flex;justify-content: space-between;">
	    <div id="corpo1-1">
	    </div>  
	    <div id="corpo1-2">
	    </div>
	  </div>

	  </br></br>

	  <div id="corpo2" style="display: flex;justify-content: space-between;">
	    <div id="corpo2-1">
	    </div>  
	    <div id="corpo2-2">
	    </div>
	  </div>

	  </br></br>

	  <div id="corpo3" style="display: flex;justify-content: space-between;">
	    <div id="corpo3-1">
	    </div>  
	    <div id="corpo3-2">
	    </div>
	  </div>
  
  </div>


    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script>window.jQuery || document.write('<script src="../../assets/js/vendor/jquery-slim.min.js"><\/script>')</script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
<!--Inicio do JavaScript no Código-->
  <script>
        function atualiza_div(idioma)
	{
	     d3.select("svg").remove();
	     d3.select("svg").remove();
             d3.select("svg").remove();
	     d3.select("svg").remove();
             
             if(idioma == 2)
             {
		     imprimeGrafico(2, "[0,10]", "Academic Age:", 'corpo1-1');
		     imprimeGrafico(2, "(10,20]", "Academic Age:", 'corpo2-1');
		     imprimeGrafico(2, ">20", "Academic Age:", 'corpo3-1');
             }
             else if(idioma == 1)
             {
		     imprimeGrafico(1, "[0,10]", "Idade Acadêmica:", 'corpo1-1');
		     imprimeGrafico(1, "(10,20]","Idade Acadêmica:", 'corpo2-1');
		     imprimeGrafico(1, ">20", "Idade Acadêmica:", 'corpo3-1');
            }
	}

	function imprimeGrafico(idioma, idade, arquivo, divsvg)
        {

            var stack = d3.layout.stack();
            var dataset =[];
     
            if(idioma == 2)
            {
		    if(idade == "[0,10]")
		    {
		       dataset = {
		        "categories": ['Global','Interdisciplinary'],
		        "series": ["Agrarian Sciences","Applied and Social Sciences","Biological Sciences","Engineering","Exact and Earth Sciences","Health Sciences","Humanities","Linguistics Letters and Arts"],
		        "colors": ["#2166ac", "#4393c3", "#92c5de", "#d1e5f0", "#fddbc7", "#f4a582", "#d6604d", "#b2182b"],
		        "layers": [
		                [
		                    {"y":9.07,"month":"Global"},
		                    {"y":10.07,"month":"Interdisciplinary"}
		                ],
		                [
		                    {"y":11.28,"month":"Global"},
		                    {"y":14.79,"month":"Interdisciplinary"}
		                ],
		                [
		                    {"y":10.26,"month":"Global"},
		                    {"y":11.24,"month":"Interdisciplinary"}
		                ],
		                [
		                    {"y":10.32,"month":"Global"},
		                    {"y":13.02,"month":"Interdisciplinary"}
		                ],
		                [
		                    {"y":12.25,"month":"Global"},
		                    {"y":16.03,"month":"Interdisciplinary"}
		                ],
		                [
		                    {"y":7.75,"month":"Global"},
		                    {"y":8.39,"month":"Interdisciplinary"}
		                ],
		                [
		                    {"y":6.96,"month":"Global"},
		                    {"y":11.08,"month":"Interdisciplinary"}
		                ],
		                [
		                    {"y":9.81,"month":"Global"},
		                    {"y":15.18,"month":"Interdisciplinary"}
		                ]
		            ]
		          }
		          n = dataset["series"].length; // Number of Layers
		          m = dataset["layers"].length; // Number of Samples in 1 layer
		    }
		    else if(idade == "(10,20]")
		    {
		        dataset = {
		        "categories": ['Global','Interdisciplinary'],
		        "series": ["Agrarian_Sciences","Applied and Social Sciences","Biological Sciences","Engineering","Exact and Earth Sciences","Health Sciences","Humanities","Linguistics Letters and Arts"],
		        "colors": ["#2166ac", "#4393c3", "#92c5de", "#d1e5f0", "#fddbc7", "#f4a582", "#d6604d", "#b2182b"],
		        "layers": [
		                [
		                    {"y":48.72,"month":"Global"},
		                    {"y":48.08,"month":"Interdisciplinary"}
		                ],
		                [
		                    {"y":51.13,"month":"Global"},
		                    {"y":45.90,"month":"Interdisciplinary"}
		                ],
		                [
		                    {"y":49.28,"month":"Global"},
		                    {"y":48.19,"month":"Interdisciplinary"}
		                ],
		                [
		                    {"y":41.56,"month":"Global"},
		                    {"y":40.88,"month":"Interdisciplinary"}
		                ],
		                [
		                    {"y":43.62,"month":"Global"},
		                    {"y":41.48,"month":"Interdisciplinary"}
		                ],
		                [
		                    {"y":44.58,"month":"Global"},
		                    {"y":43.47,"month":"Interdisciplinary"}
		                ],
		                [
		                    {"y":45.92,"month":"Global"},
		                    {"y":46.73,"month":"Interdisciplinary"}
		                ],
		                [
		                    {"y":46.43,"month":"Global"},
		                    {"y":48.55,"month":"Interdisciplinary"}
		                ]
		            ]
		          }
		          n = dataset["series"].length; // Number of Layers
		          m = dataset["layers"].length; // Number of Samples in 1 layer
		    }
		    else
		    {
		        dataset = {
		        "categories": ['Global','Interdisciplinary'],
		        "series": ["Agrarian_Sciences","Applied and Social Sciences","Biological Sciences","Engineering","Exact and Earth Sciences","Health Sciences","Humanities","Linguistics Letters and Arts"],
		        "colors": ["#2166ac", "#4393c3", "#92c5de", "#d1e5f0", "#fddbc7", "#f4a582", "#d6604d", "#b2182b"],
		        "layers": [
		                [
		                    {"y":42.21,"month":"Global"},
		                    {"y":41.85,"month":"Interdisciplinary"}
		                ],
		                [
		                    {"y":37.59,"month":"Global"},
		                    {"y":39.31,"month":"Interdisciplinary"}
		                ],
		                [
		                    {"y":40.46,"month":"Global"},
		                    {"y":40.57,"month":"Interdisciplinary"}
		                ],
		                [
		                    {"y":48.12,"month":"Global"},
		                    {"y":46.12,"month":"Interdisciplinary"}
		                ],
		                [
		                    {"y":44.13,"month":"Global"},
		                    {"y":42.49,"month":"Interdisciplinary"}
		                ],
		                [
		                    {"y":47.67,"month":"Global"},
		                    {"y":48.14,"month":"Interdisciplinary"}
		                ],
		                [
		                    {"y":47.12,"month":"Global"},
		                    {"y":42.19,"month":"Interdisciplinary"}
		                ],
		                [
		                    {"y":43.76,"month":"Global"},
		                    {"y":36.27,"month":"Interdisciplinary"}
		                ]
		            ]
		          }
		          n = dataset["series"].length; // Number of Layers
		          m = dataset["layers"].length; // Number of Samples in 1 layer
		    }
            }
            else if(idioma == 1)
            {
		    if(idade == "[0,10]")
		    {
		       dataset = {
		        "categories": ['Global','Interdisciplinar'],
		        "series": ["Ciências Agrárias","Ciências Biológicas", "Ciências da Saúde","Ciências Exatas e da Terra","Ciências Humanas","Ciências Aplicadas e Sociais","Engenharias","Linguística Letras and Artes"],
		        "colors": ["#2166ac", "#4393c3", "#92c5de", "#d1e5f0", "#fddbc7", "#f4a582", "#d6604d", "#b2182b"],
		        "layers": [
		                [
		                    {"y":9.07,"month":"Global"},
		                    {"y":10.07,"month":"Interdisciplinar"}
		                ],
		                [
		                    {"y":10.26,"month":"Global"},
		                    {"y":11.24,"month":"Interdisciplinar"}
		                ],
		                [
		                    {"y":7.75,"month":"Global"},
		                    {"y":8.39,"month":"Interdisciplinar"}
		                ],
		                [
		                    {"y":12.25,"month":"Global"},
		                    {"y":16.03,"month":"Interdisciplinar"}
		                ],
		                [
		                    {"y":6.96,"month":"Global"},
		                    {"y":11.08,"month":"Interdisciplinar"}
		                ],
		                [
		                    {"y":11.28,"month":"Global"},
		                    {"y":14.79,"month":"Interdisciplinar"}
		                ],
		                [
		                    {"y":10.32,"month":"Global"},
		                    {"y":13.02,"month":"Interdisciplinar"}
		                ],
		                [
		                    {"y":9.81,"month":"Global"},
		                    {"y":15.18,"month":"Interdisciplinar"}
		                ]
		            ]
		          }
		          n = dataset["series"].length; // Number of Layers
		          m = dataset["layers"].length; // Number of Samples in 1 layer
		    }
		    else if(idade == "(10,20]")
		    {
		        dataset = {
		        "categories": ['Global','Interdisciplinar'],
		        "series": ["Agrarian Sciences","Biological Sciences","Health Sciences","Exact and Earth Sciences","Humanities","Applied and Social Sciences","Engineering","Linguistics Letters and Arts"],
		        "colors": ["#2166ac", "#4393c3", "#92c5de", "#d1e5f0", "#fddbc7", "#f4a582", "#d6604d", "#b2182b"],
		        "layers": [
		                [
		                    {"y":48.72,"month":"Global"},
		                    {"y":48.08,"month":"Interdisciplinar"}
		                ],
		                [
		                    {"y":49.28,"month":"Global"},
		                    {"y":48.19,"month":"Interdisciplinar"}
		                ],
		                [
		                    {"y":47.67,"month":"Global"},
		                    {"y":48.14,"month":"Interdisciplinar"}
		                ],
		                [
		                    {"y":44.13,"month":"Global"},
		                    {"y":42.49,"month":"Interdisciplinar"}
		                ],
		                [
		                    {"y":47.12,"month":"Global"},
		                    {"y":42.19,"month":"Interdisciplinar"}
		                ],
		                [
		                    {"y":37.59,"month":"Global"},
		                    {"y":39.31,"month":"Interdisciplinar"}
		                ],
		                [
		                    {"y":41.59,"month":"Global"},
		                    {"y":40.88,"month":"Interdisciplinar"}
		                ],
		                [
		                    {"y":43.76,"month":"Global"},
		                    {"y":36.27,"month":"Interdisciplinar"}
		                ]
		            ]
		          }
		          n = dataset["series"].length; // Number of Layers
		          m = dataset["layers"].length; // Number of Samples in 1 layer
		    }
		    else
		    {
		        dataset = {
		        "categories": ['Global','Interdisciplinar'],
		        "series": ["Agrarian Sciences","Biological Sciences","Health Sciences","Exact and Earth Sciences","Humanities","Applied and Social Sciences","Engineering","Linguistics Letters and Arts"],
		        "colors": ["#2166ac", "#4393c3", "#92c5de", "#d1e5f0", "#fddbc7", "#f4a582", "#d6604d", "#b2182b"],
		        "layers": [
		                [
		                    {"y":42.21,"month":"Global"},
		                    {"y":41.85,"month":"Interdisciplinar"}
		                ],
		                [
		                    {"y":40.46,"month":"Global"},
		                    {"y":40.57,"month":"Interdisciplinar"}
		                ],
		                [
		                    {"y":47.67,"month":"Global"},
		                    {"y":48.14,"month":"Interdisciplinar"}
		                ],
		                [
		                    {"y":44.13,"month":"Global"},
		                    {"y":42.49,"month":"Interdisciplinar"}
		                ],
		                [
		                    {"y":47.12,"month":"Global"},
		                    {"y":42.19,"month":"Interdisciplinar"}
		                ],
		                [
		                    {"y":37.59,"month":"Global"},
		                    {"y":39.31,"month":"Interdisciplinar"}
		                ],
		                [
		                    {"y":48.12,"month":"Global"},
		                    {"y":46.10,"month":"Interdisciplinar"}
		                ],
		                [
		                    {"y":43.76,"month":"Global"},
		                    {"y":36.27,"month":"Interdisciplinar"}
		                ]
		            ]
		          }
		          n = dataset["series"].length; // Number of Layers
		          m = dataset["layers"].length; // Number of Samples in 1 layer
		    }
            }



    var formatPercent = d3.format(".0%");

    var margin = {top: 30, right: 30, bottom: 30, left: 30},
	width = document.getElementById(divsvg).offsetWidth - (margin.left) - (margin.right),
	height = document.getElementById(divsvg).offsetHeight - (margin.top) - (margin.bottom);

    var x = d3.scale.ordinal()
        .domain(dataset["categories"])
        .rangeRoundBands([0, width], .08);

    var y = d3.scale.linear()
        .domain([0, 0.55])
        .range([height, 0]);

    var xAxis = d3.svg.axis()
        .scale(x)
        .tickSize(5)
        .tickPadding(6)
        .orient("bottom");

    var yAxis = d3.svg.axis()
        .scale(y)
        .orient("left")
        .tickFormat(formatPercent);

    var svg = d3.select("div#"+divsvg).append("svg")
        .attr("width", width + 2*(margin.left + margin.right))
        .attr("height", height + margin.top + margin.bottom)
        .append("g")
        .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

    var layer = svg.selectAll(".layer")
        .data(dataset["layers"])
        .enter().append("g")
        .attr("class", "layer");

    var rect = layer.selectAll("rect")
        .data(function(d,i){d.map(function(b){b.colorIndex=i;return b;});return d;})
        .enter()
    rect.append("rect")
        .attr("x", function(d, i, j) { return x(d.month) + x.rangeBand() / n * j; })
        .attr("width", x.rangeBand() / n)
        .attr("y", function(d) { return y(d.y/100); })
        .attr("height", function(d) { return height - y(d.y/100)})
        .attr("class","bar")
        .style("fill",function(d){return dataset["colors"][d.colorIndex];})

    rect.append("text").text(function(d) {return d.y+"%";})
       .attr("x", function(d, i, j) { return 22+(x(d.month) + x.rangeBand() / n * j); })
       .attr("y", function(d) {return y(d.y/100)-6;})
       .attr("text-anchor", "middle");

        svg.append("g")
            .attr("class", "x axis")
            .attr("transform", "translate(0," + height + ")")
            .call(xAxis);

//definido o dominio y do gráfico
    svg.append("g")
        .attr("class", "y axis")
	.call(yAxis)
        .append("text")
	.attr("transform", "rotate(-90)")
	.attr("y", 6)
	.attr("dy", ".71em")
	.style("text-anchor", "end")
	.text(function(){if(idioma == 1){return "Frequência";}else{return "Frequency"}});

//Título do Gráfico *tittle* é adicionado aqui no svg
        svg.append("text")
	    .attr("x", (width / 2))             
	    .attr("y", 0 - (margin.top / 2)+10)
	    .attr("text-anchor", "middle")  
	    .style("font-size", "30px") 
	    .text(function(){if(idioma == 1){return idade + " Anos";}else{return idade+" Years"}});
 
        if(idade == "[0,10]")
        {

		    // add legend
		    var legend = svg.append("g")
		      .attr("class", "legend")

                    legend.selectAll('text')
		      .data(dataset["colors"])
		      .enter()
		      .append("rect")
		      .attr("x", function(d, i, k){k = (i%4)*210; return margin.right+k})
		      .attr("y", function(d, i, k){if(i < 4){k=2;} else {k =3;} return k *  15;})
		      .attr("width", 10)
		      .attr("height", 10)
		      .style("fill", function(d) {
			return d;
		      })

		    legend.selectAll('text')
		      .data(dataset["series"])
		      .enter()
		    .append("text")
		    .attr("x", function(d, i, k){k = (i%4)*210; return margin.right+k+25})
		    .attr("y", function(d, i, k){if(i < 4){k=2;} else {k =3;} console.log(k); return k *  15+9;})
		    .text(function(d){return d});
         }
	}
        
        function get_idioma()
        {
          var idiomas = document.getElementById('idioma')
          return idiomas.options[idioma.selectedIndex].value
        }
  </script>
<!--Final do JavaScript no Código-->
  <script> atualiza_div(2);</script>
</body>
</html>
